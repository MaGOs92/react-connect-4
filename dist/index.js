import e,{useRef as n,useState as t,useEffect as o}from"react";var r;function c(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}!function(e){e[e.HUMAN=1]="HUMAN",e[e.IA=2]="IA"}(r||(r={}));var l,_="token-module_yellow__f-UIs",d="token-module_innerYellow__YXYR2",a="token-module_red__xDew-",i="token-module_innerRed__J3ySH",u="token-module_previewToken__EFWMU",m="token-module_token__S9MOI",s="token-module_inner__7Kykr";function f({player:n,isPreview:t}){const o=n===r.HUMAN?a:_,c=n===r.HUMAN?i:d;return e.createElement("div",{className:`${m} ${o} ${t&&u}`},e.createElement("div",{className:`${s} ${c}`}))}function h(){for(var e=new Array,n=0;n<7;n++){e[n]=new Array;for(var t=0;t<6;t++)e[n][t]=0}return e}function b(e,n){return 0===n[e][5]}function p(e,n,t){const o=function(e){return e.reduce(((e,n,t)=>(e[t]=[...n],e)),[...e])}(t);let r=!1;for(let t=0;t<6;t++)0!==o[e][t]||r||(o[e][t]=n,r=!0);return o}function N(e){let n=!0,t=0;return e.map(((o,r)=>{o.map(((c,l)=>{if(0===c)return void(n=!1);let _=1,d=3;for(let n=r-1;n>=0&&!(d<=0);n--)e[n][l]===c&&_++,d--;if(4===_)return t=c;_=1,d=3;for(let n=r+1;n<e.length&&!(d<=0);n++)e[n][l]===c&&_++,d--;if(4===_)return t=c;_=1,d=3;for(let n=l+1;n<=o.length&&!(d<=0);n++)e[r][n]===c&&_++,d--;if(4===_)return t=c;_=1,d=3;let a=l+1;for(let n=r-1;n>=0&&!(d<=0||a>=o.length);n--)e[n][a]===c&&_++,d--,a++;if(4===_)return t=c;_=1,d=3,a=l+1;for(let n=r+1;n<e.length&&!(d<=0||a>=o.length);n++)e[n][a]===c&&_++,d--,a++;return 4===_?t=c:void 0}))})),1===t||2===t?t:n?l.TIE:l.PLAYING}function I(e,n){const t=N(e);if(t===l.HUMAN_WON)return-n;if(t===l.IA_WON)return n;if(t===l.TIE||n<=0)return 0;let o=1/0;for(let t=0;t<7;t++)if(b(t,e)){let c=y(p(t,r.HUMAN,e),n-1);c<o&&(o=c)}return o}function y(e,n){const t=N(e);if(t===l.HUMAN_WON)return-n;if(t===l.IA_WON)return n;if(t===l.TIE||n<=0)return 0;let o=-1/0;for(let t=0;t<7;t++)if(b(t,e)){let c=I(p(t,r.IA,e),n-1);c>o&&(o=c)}return o}function k(e){const c=n(h()),[_,d]=t(!0),[a,i]=t(l.PLAYING);function u(){c.current=h(),d(!0),i(l.PLAYING)}return o((()=>{if(!_&&a===l.PLAYING){const n=function(e,n){let t=0,o=-1/0;return e.forEach(((c,l)=>{if(b(l,e)){let c=I(p(l,r.IA,e),n);c>o&&(o=c,t=l)}})),t}(c.current,e);c.current=p(n,r.IA,c.current),i(N(c.current)),d(!0)}}),[_,a,e]),{newGame:u,play:function(e){a!==l.PLAYING?u():_&&function(e){if(0===c.current[e][5])return!0}(e)&&(d(!1),c.current=p(e,r.HUMAN,c.current),i(N(c.current)))},isHumanTurn:_,gameState:a,board:c.current}}c(".token-module_yellow__f-UIs {\n  background-color: #a98f00; }\n\n.token-module_innerYellow__YXYR2 {\n  background-color: #f9da2b; }\n\n.token-module_red__xDew- {\n  background-color: #760006; }\n\n.token-module_innerRed__J3ySH {\n  background-color: #c3000a; }\n\n.token-module_previewToken__EFWMU {\n  opacity: 50%; }\n\n.token-module_token__S9MOI {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  height: 100%;\n  width: 100%; }\n  .token-module_token__S9MOI > .token-module_inner__7Kykr {\n    border-radius: 50%;\n    height: 80%;\n    width: 80%; }\n"),function(e){e[e.PLAYING=0]="PLAYING",e[e.HUMAN_WON=1]="HUMAN_WON",e[e.IA_WON=2]="IA_WON",e[e.TIE=3]="TIE"}(l||(l={}));var w={container:"connect4-module_container__bXhGt",board:"connect4-module_board__Htn6-",row:"connect4-module_row__25dhh",case:"connect4-module_case__hI84j",innerCase:"connect4-module_innerCase__lt4XH",boardBottom:"connect4-module_boardBottom__fNpIc",foot:"connect4-module_foot__y85tK"};function A({onPlayed:n,iaDifficulty:o=4}){const[r,c]=t(null),{play:_,gameState:d,board:a,isHumanTurn:i}=k(o),u=[0,1,2,3,4,5,6];return e.createElement("div",{className:w.container},e.createElement("div",{className:w.game},e.createElement("div",{className:w.board},[5,4,3,2,1,0].map((t=>e.createElement("div",{className:w.row,key:`row-${t}`},u.map((o=>e.createElement("div",{key:`case-${o}${t}`,className:w.case,onMouseEnter:()=>c(o),onMouseLeave:()=>c(null),onClick:()=>{_(o),n&&n(d)}},e.createElement("div",{className:w.innerCase},0!==a[o][t]&&e.createElement(f,{player:a[o][t]}),((e,n)=>{if(r===e&&i&&d===l.PLAYING)return 0===a[e][n]&&(0===n||1===a[e][n-1]||2===a[e][n-1])})(o,t)&&e.createElement(f,{player:1,isPreview:!0}))))))))),e.createElement("div",{className:w.boardBottom},e.createElement("div",{className:w.foot}),e.createElement("div",{className:w.foot}))))}c(".connect4-module_container__bXhGt {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center; }\n  .connect4-module_container__bXhGt .connect4-module_board__Htn6- > .connect4-module_row__25dhh:first-child > .connect4-module_case__hI84j:first-child {\n    border-top-left-radius: 5px; }\n  .connect4-module_container__bXhGt .connect4-module_board__Htn6- > .connect4-module_row__25dhh:first-child > .connect4-module_case__hI84j:last-child {\n    border-top-right-radius: 5px; }\n  .connect4-module_container__bXhGt .connect4-module_board__Htn6- > .connect4-module_row__25dhh:last-child > .connect4-module_case__hI84j:first-child {\n    border-bottom-left-radius: 5px; }\n  .connect4-module_container__bXhGt .connect4-module_board__Htn6- > .connect4-module_row__25dhh:last-child > .connect4-module_case__hI84j:last-child {\n    border-bottom-right-radius: 5px; }\n  .connect4-module_container__bXhGt .connect4-module_row__25dhh {\n    display: flex; }\n    .connect4-module_container__bXhGt .connect4-module_row__25dhh .connect4-module_case__hI84j {\n      width: 75px;\n      height: 75px;\n      border: 6px solid #043dcb;\n      background-color: #043dcb; }\n      .connect4-module_container__bXhGt .connect4-module_row__25dhh .connect4-module_case__hI84j > .connect4-module_innerCase__lt4XH {\n        position: relative;\n        border-radius: 50%;\n        height: 100%;\n        width: 100%;\n        background-color: white; }\n  .connect4-module_container__bXhGt .connect4-module_boardBottom__fNpIc {\n    display: flex;\n    justify-content: space-between;\n    width: 100%; }\n    .connect4-module_container__bXhGt .connect4-module_boardBottom__fNpIc > .connect4-module_foot__y85tK {\n      margin-top: -2px;\n      width: 75px;\n      height: 30px;\n      border: 5px solid #043dcb;\n      background-color: #043dcb;\n      border-radius: 50% 50% 5px 5px; }\n");export{A as default};
